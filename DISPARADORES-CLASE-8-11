///// EJERCICIO NO. 1 DISPARADOR DE TIPO BEFORE
CREATE TABLE USUARIO_XXX (ID_USUARIO_XXX INTEGER,EMAIL VARCHAR2(120),EDAD INTEGER);

///// CREAMOS EL DISPARADOR DE TIPO BEFORE
CREATE OR REPLACE TRIGGER DISPARADOR_USUARIO_XXX  
BEFORE INSERT ON USUARIO_XXX FOR EACH ROW 
BEGIN 
IF :NEW.EDAD < 18 THEN 
RAISE_APPLICATION_ERROR(-20001, 'LO SIENTO ERES MUY PEQUEÑO'); 
END IF; 
END; 
 
INSERT INTO USUARIO_XXX (EDAD) 
VALUES (20); 
 
INSERT INTO USUARIO_XXX (EDAD) 
VALUES (16); 
 
SELECT * FROM USUARIO_XXX; 

///// CREAMOS EL DISPARADOR DE TIPO BEFORE
CREATE OR REPLACE TRIGGER DISPARADOR_USUARIO_XXX  
BEFORE INSERT ON USUARIO_XXX FOR EACH ROW 
BEGIN 
IF :NEW.EDAD < 18 OR LENGTH( :NEW.EMAIL < 3 THEN 
RAISE_APPLICATION_ERROR(-20001, 'LO SIENTO ERES MUY PEQUEÑO'); 
END IF; 
END;

///// EJERCICIO NO. 2 DISPARADOR DE TIPO AFTER

CREATE TABLE REGISTRO(ID INTEGER, EMAIL VARCHAR2(60), EDAD INTEGER);

CREATE TABLE REGISTRO_MENOR(ID INTEGER, EMAIL VARCHAR2(60), EDAD INTEGER);

CREATE TABLE REGISTRO_MAYOR(ID INTEGER, EMAIL VARCHAR2(60), EDAD INTEGER);


///// CREAMOS EL DISPARADOR DE TIPO AFTER

CREATE OR REPLACE TRIGGER DISPARADOR_REGISTRO AFTER INSERT ON REGISTRO FOR EACH ROW
BEGIN
IF :NEW.EDAD <18 THEN
INSERT INTO REGISTRO_MENOR VALUES(:NEW.ID,:NEW.EMAIL,:NEW.EDAD);
ELSE
INSERT INTO REGISTRO_MAYOR VALUES(:NEW.ID,:NEW.EMAIL,:NEW.EDAD);
END IF;
END;

INSERT INTO REGISTRO VALUES(1, 'XXX', 19);

SELECT * FROM REGISTRO;
SELECT * FROM REGISTRO_MENOR;
SELECT * FROM REGISTRO_MAYOR;

INSERT INTO REGISTRO VALUES(1, 'XXX', 16);

SELECT * FROM REGISTRO_MENOR;  

///// EJERCICIO NO.3

CREATE TABLE USUARIO_REG (ID INTEGER, EMAIL VARCHAR2(30), EDAD INTEGER);

INSERT INTO USUARIO_REG VALUES(1, 'XCVBA', 16);
INSERT INTO USUARIO_REG VALUES(2, 'HDASJDIA', 18);                                
INSERT INTO USUARIO_REG VALUES(3, 'LADIDPOIEDP', 22);

SELECT * FROM USUARIO_REG;

CREATE OR REPLACE TRIGGER DISPARADOR_USUARIO_REG BEFORE INSERT OR UPDATE ON USUARIO_REG FOR EACH ROW
BEGIN
IF TO_CHAR(SYSDATE, 'HH24') < 11 OR TO_CHAR (SYSDATE,'HH24') >=22 THEN
RAISE_APPLICATION_ERROR(-20501,'FUERA DE TIEMPO'); 
END IF; 
END;
/
