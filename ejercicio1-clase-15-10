1 CREATE TABLE DEVELOPER (ID_DEVELOPER INTEGER, NOMBRE VARCHAR2(120), EMAIL VARCHAR2(120),CONSTRAINT PK_ID_DEVELOPER PRIMARY KEY (ID_DEVELOPER)); 
2 CREATE TABLE TAREA(ID_TAREA INTEGER, ID_DEVELOPER INTEGER, DECRIPCION VARCHAR2 (500),COMPLETADA CHAR, PORCIENTO_COMPLETADA INTEGER,FECHA DATE,CONSTRAINT PK_ID_TAREA PRIMARY KEY (ID_TAREA),CONSTRAINT FK_ID_DEVELOPER FOREIGN KEY (ID_DEVELOPER)REFERENCES DEVELOPER(ID_DEVELOPER)); 
3 
 
4 CREATE SEQUENCE SECUENCIA_DEVELOPER 
5   START WITH 1 
6   INCREMENT BY 1 
7   NOMAXVALUE; 
8    
9   CREATE SEQUENCE SECUENCIA_TAREA 
10   START WITH 1 
11   INCREMENT BY 1 
12   NOMAXVALUE; 
13    
14 CREATE OR REPLACE PROCEDURE GUARDAR_DEVELOPER (MY_ID_DEVELOPER OUT INTEGER, MY_NOMBRE IN VARCHAR2,MY_EMAIL  IN VARCHAR2) 
15   AS  
16   BEGIN 
17   SELECT SECUENCIA_DEVELOPER.NEXTVAL INTO MY_ID_DEVELOPER FROM DUAL; 
18   INSERT INTO DEVELOPER VALUES (MY_ID_DEVELOPER, MY_NOMBRE,MY_EMAIL); 
19   END; 
20 
 
21 CREATE OR REPLACE PROCEDURE GUARDAR_TAREA(MY_ID_TAREA OUT INTEGER, MY_ID_DEVELOPER IN INTEGER,MY_DESCRIPCION IN VARCHAR2, MY_COMPLETADA IN CHAR, MY_PORCIENTO_COMPLETADA INTEGER,MY_FECHA DATE ) 
22   AS 
23   BEGIN 
24   SELECT SECUENCIA_TAREA.NEXTVAL INTO MY_ID_TAREA FROM DUAL; 
25   INSERT INTO TAREA VALUES (MY_ID_TAREA,MY_ID_DEVELOPER, MY_DESCRIPCION,MY_COMPLETADA, MY_PORCIENTO_COMPLETADA,MY_FECHA); 
26   END; 
27 
 
28 DECLARE  
29 VALOR INTEGER; 
30 BEGIN 
31 GUARDAR_DEVELOPER(VALOR,'BRENDA','BRENDA@GMAIL.COM'); 
32 GUARDAR_DEVELOPER(VALOR,'JOSE OMAR','JOSEOMAR@YAHOO.COM'); 
33 GUARDAR_DEVELOPER(VALOR,'VICTOR ANGEL','VICTOR@HOTMAIL.COM'); 
34 GUARDAR_DEVELOPER(VALOR,'LESLYE','LESLIE@LIVE.COM'); 
35 DBMS_OUTPUT.PUT_LINE('REGISTRO GUARDADO CON ID:' ||VALOR); 
36 END; 
37 	 
38 	 
39 
 
40 SELECT * FROM DEVELOPER; 
41 
 
42 DECLARE  
43 VALOR1 INTEGER; 
44 BEGIN 
45 GUARDAR_TAREA(VALOR1,1,'CREACION DE PAGINA WEB','N',0,SYSDATE); 
46 GUARDAR_TAREA(VALOR1,2,'CREACION DE TABLAS','N',0,SYSDATE); 
47 GUARDAR_TAREA(VALOR1,3,'PROGRMACION DE PROCEDIMIENTOS','N',0,SYSDATE); 
48 GUARDAR_TAREA(VALOR1,4,'ROGRAMACION DE LOS SERVICIOS WEB','N',0,SYSDATE); 
49 DBMS_OUTPUT.PUT_LINE('REGISTRO GUARDADO CON ID:' ||VALOR1); 
50 END; 
51 	 
52 SELECT * FROM TAREA; 
53 
 
54 CREATE OR REPLACE PROCEDURE ACTUALIZAR_TAREA(ID_TAREA IN INTEGER,ID_DEVELOPER IN INTEGER,) 
55 AS 
56 BEGIN 
57 SELECT SECUENCIA_TAREA.NEXTVAL INTO MY_ID_TAREA FROM DUAL; 
58 INSERT INTO TAREA VALUES (MY_ID_TAREA,MY_ID_DEVELOPER,MY_DESCRIPCION,MY_COMPLETADA,MY_PORCIENTO_COMPLETADA,MY_FECHA); 
59 END; 
60 
 
61 
 
62 
 
63 
 
64 CREATE OR REPLACE PROCEDURE ACTUALIZAR_TAREA(MY_ID_TAREA IN INTEGER, MY_ID_DEVELOPER IN INTEGER, MY_PORCIENTO_COMPLETADA IN INTEGER) 
65 AS 
66 PORCENTAJE_ACTUAL INTEGER; 
67 PORCENTAJE_TOTAL INTEGER; 
68 BEGIN 
69 SELECT PORCIENTO_COMPLETADA INTO PORCENTAJE_ACTUAL FROM TAREA WHERE ID_TAREA=MY_ID_TAREA; 
70 PORCENTAJE_TOTAL := PORCENTAJE_ACTUAL + MY_PORCIENTO_COMPLETADA; 
71 IF PORCENTAJE_TOTAL > 100 THEN 
72   RAISE_APPLICATION_ERROR(-20003, 'LO SIENTO EL PORCENTAGE ES MAYOR A 100%'); 
73 END IF; 
74 IF PORCENTAJE_TOTAL = 100 THEN 
75   UPDATE TAREA SET PORCIENTO_COMPLETADA=100, COMPLETADA='S',FECHA=SYSDATE WHERE ID_TAREA=MY_ID_TAREA; 
76 END IF; 
77 UPDATE TAREA SET PORCIENTO_COMPLETADA=PORCENTAJE_TOTAL, FECHA=SYSDATE WHERE ID_TAREA=MY_ID_TAREA; 
78 END; 
79 
 
80 
 
81 BEGIN 
82 ACTUALIZAR_TAREA(1, 1, 30); 
83 END; 
84 
 
85 BEGIN 
86 ACTUALIZAR_TAREA(1, 1, 40); 
87 END; 
